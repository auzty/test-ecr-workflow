name: self hosted


#. When does it execute in jenkins?
on:
  workflow_dispatch:
    inputs:
      review-api-url:
        description: 'Review_API_URL'
        required: true
        default: 'localhost'
        type: choice
        options:
          - 'localhost:3000'
          - '192.168.56.110:3000'

jobs:
  build-deploy-branch:
    runs-on: vbox-yusuf-local
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: test ls
        run: echo ls
      - name: test dockerver
        run: docker version
      - name: no timeout
        timeout-minutes: 1
        continue-on-error: true
        run: docker run -p 3000:8000 --rm jwilder/whoami
      - name: test url
        run: echo "{{ github.event.inputs.review-api-url }}"
        #run: timeout 60 docker run -p 3000:8000 --rm jwidler/whoami || code=$?; if [[ $code -ne 124 && $code -ne 0 ]]; then exit $code; fi
